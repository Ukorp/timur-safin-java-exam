# Экзамен по РПКС, Тимур Сафин М8О-311Б-22

Билет №25:
1.  Интерфейс Set<E>. Основные реализации. Как работают вставка, удаление, поиск элемента на примере одной из реализаций.
2. 	Redis – как устроен и для чего используется. Модель данных в MongoDB. Типы данных в Redis. Процесс записи данных в Redis. Процесс чтения данных в Redis. Процесс удаления данных из Redis. За счет чего достигается высокая производительность. Как организовать очередь сообщений через Redis. Как в Java работать с Redis.
3.  Реализовать endpoint в TaskController, которому при запросе передаётся boostrapServers и название топика. В endpoint создаётся consumer Kafka, который читает топик, начиная с самых старых сообщений. Далее в MongoDB находим документ, который содержит в поле test_field значение из первого сообщения Kafka ("test") и возвращаем в endpoint значение поля test_value_field из документа MongoDB, но без каждого второго символа

## 1. Интерфейс Set. Основные реализации. Как работают вставка, удаление, поиск элемента на примере одной из реализаций

Интерфейс Set в Java — это коллекция, в которой не может быть повторяющихся элементов. То есть если попытаться добавить в Set один и тот же объект дважды, второй раз он просто не добавится. Это удобно, когда надо хранить уникальные значения.

Основные реализации Set:
* HashSet — основан на хеш-таблице, не сохраняет порядок элементов.
* LinkedHashSet — как HashSet, но сохраняет порядок добавления.
* TreeSet — хранит элементы в отсортированном порядке (использует красно-черное дерево).

Работа HashSet:
Вставка: при добавлении элемента считается его hashCode(), и на его основе определяется, куда его положить в массив (внутри используется хеш-таблица).
Удаление: тоже сначала вычисляется хеш, потом ищется нужная ячейка и удаляется элемент.
Поиск: аналогично — сначала хеш, потом проверка ячейки, есть ли там нужный объект.

Если произошла коллизия эллементов в хэш таблице - используется связный список (метод цепочек). Если длина связного списка больше 8 - создаётся красно-чёрное дерево

## 2

Redis — это NoSQL база данных, которая работает в памяти (RAM), а не с жёстким диском. Она больше всего похожа на мапы в программировании — ключ и значение. Redis часто используют для кэширования, хранения сессий, очередей, подсчётов и всяких временных данных.

В MongoDB всё хранится в виде коллекций и документов. Коллекция — это как таблица в SQL, а документ — это как строка, только в формате BSON (бинарный JSON). То есть, данные хранятся в виде вложенных структур, что очень удобно для работы с гибкими или изменяющимися схемами.

### Типы данных в Redis
* String — обычная строка или число
* List — список, можно добавлять в начало и конец
* Set — множество без повторений
* Sorted Set (ZSet) — множество с приоритетами (например, для рейтингов)
* Hash — как объект с полями
* Stream — для логов и событий

### Процесс записи/чтения данных в Redis
При SET key value, Redis просто сохраняет это в оперативке. Также может записать это в файл на диск, если включена такая настройка (RDB или AOF), чтобы при перезапуске всё не потерялось.
Redis читает данные напрямую из оперативки, то есть очень быстро.
Удалять элементы можно через DEL либо установив EXPIRE (характерно для кэширования)

### Как организовать очередь сообщений через Redis

Самый простой способ — использовать List:
Один сервис делает LPUSH queue "сообщение", другой делает BRPOP queue — и получает сообщение, когда оно появится

### Как в Java работать с Redis
Можно использовать библиотеку Jedis, либо работать через Spring Data Redis в spring boot. Spring Data Redis может так же использоваться реактивно, используя webFlux
